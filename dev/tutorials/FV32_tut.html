<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>TEST FV32: Cantilevered tapered membrane, free vibration · FinEtoolsDeforLinear.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">FinEtoolsDeforLinear.jl</span></div><form class="docs-search" action="../search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../index.html">Home</a></li><li><a class="tocitem" href="tutorials.html">Tutorials</a></li><li><a class="tocitem" href="../guide/guide.html">How to guide</a></li><li><span class="tocitem">Types and Functions</span><ul><li><a class="tocitem" href="../man/types.html">Types</a></li><li><a class="tocitem" href="../man/functions.html">Functions</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="FV32_tut.html">TEST FV32: Cantilevered tapered membrane, free vibration</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="FV32_tut.html">TEST FV32: Cantilevered tapered membrane, free vibration</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/PetrKryslUCSD/FinEtoolsDeforLinear.jl/blob/master/docs/src/tutorials/FV32_tut.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="TEST-FV32:-Cantilevered-tapered-membrane,-free-vibration"><a class="docs-heading-anchor" href="#TEST-FV32:-Cantilevered-tapered-membrane,-free-vibration">TEST FV32: Cantilevered tapered membrane, free vibration</a><a id="TEST-FV32:-Cantilevered-tapered-membrane,-free-vibration-1"></a><a class="docs-heading-anchor-permalink" href="#TEST-FV32:-Cantilevered-tapered-membrane,-free-vibration" title="Permalink"></a></h1><h2 id="Description"><a class="docs-heading-anchor" href="#Description">Description</a><a id="Description-1"></a><a class="docs-heading-anchor-permalink" href="#Description" title="Permalink"></a></h2><p>FV32: Cantilevered tapered membrane is a test recommended by the National Agency for Finite Element Methods and Standards (U.K.): Test FV32 from NAFEMS publication TNSB, Rev. 3, “The Standard NAFEMS Benchmarks,” October 1990.</p><p>Reference solution: 44.623  130.03  162.70  246.05  379.90  391.44 for the first six modes.</p><p>The benchmark is originally for plane stress conditions. We simulate the plane-stress conditions with a three-dimensional mesh that is constrained along one plane of nodes to effect the constrained motion only in the plane of the trapezoidal membrane.</p><p><img src="FV32-mesh.png" alt/></p><h2 id="References"><a class="docs-heading-anchor" href="#References">References</a><a id="References-1"></a><a class="docs-heading-anchor-permalink" href="#References" title="Permalink"></a></h2><p>[1] Test FV32 from NAFEMS publication TNSB, Rev. 3, “The Standard NAFEMS Benchmarks,” October 1990.</p><h2 id="Goals"><a class="docs-heading-anchor" href="#Goals">Goals</a><a id="Goals-1"></a><a class="docs-heading-anchor-permalink" href="#Goals" title="Permalink"></a></h2><ul><li>Show how to generate hexahedral mesh in a rectangular block  and shape it into a trapezoid.</li><li>Set up model data for the solution algorithms.</li><li>Use two different finite element model machines to evaluate the stiffness and the mass.</li><li>Execute the modal algorithm and export the results with another algorithm.</li></ul><pre><code class="language-julia">#</code></pre><h2 id="Definitions"><a class="docs-heading-anchor" href="#Definitions">Definitions</a><a id="Definitions-1"></a><a class="docs-heading-anchor-permalink" href="#Definitions" title="Permalink"></a></h2><p>Bring in the required support from the basic linear algebra, eigenvalue solvers, and the finite element tools.</p><pre><code class="language-julia">using LinearAlgebra
using Arpack
using FinEtools
using FinEtools
using FinEtoolsDeforLinear
using FinEtoolsDeforLinear: AlgoDeforLinearModule</code></pre><p>The input data is given by the benchmark.</p><pre><code class="language-julia">E = 200*phun(&quot;GPA&quot;);
nu = 0.3;
rho= 8000*phun(&quot;KG/M^3&quot;);
L = 10*phun(&quot;M&quot;);
W0 = 5*phun(&quot;M&quot;);
WL = 1*phun(&quot;M&quot;);
H = 0.05*phun(&quot;M&quot;);</code></pre><p>We shall generate a three-dimensional mesh. It should have 1 element through the thickness, and 8 and 4 elements in the plane of the membrane.</p><pre><code class="language-julia">nL, nW, nH = 8, 4, 1;# How many element edges per side?</code></pre><p>The reference frequencies are obtained from [1].</p><pre><code class="language-julia">Reffs = [44.623 130.03  162.70  246.05  379.90  391.44]</code></pre><p>The three-dimensional mesh of 20 node serendipity hexahedral should correspond to the plane-stress quadratic serendipity quadrilateral (CPS8R) used in the Abaqus benchmark. We simulate the plane-stress conditions with a three-dimensional mesh that is constrained along one plane of nodes to effect the constrained motion only in the plane of the trapezoidal membrane. No bending out of plane! First we generate mesh of a rectangular block.</p><pre><code class="language-julia">fens,fes = H20block(1.0, 2.0, 1.0, nL, nW, nH)</code></pre><p>Now distort the rectangular block into the tapered plate.</p><pre><code class="language-julia">for i in 1:count(fens)
    xi, eta, theta = fens.xyz[i,:];
    eta = eta - 1.0
    fens.xyz[i,:] = [xi*L eta*(1.0 - 0.8*xi)*W0/2 theta*H/2];
end</code></pre><p>We can visualize the mesh with Paraview (for instance).</p><pre><code class="language-julia">File =  &quot;FV32-mesh.vtk&quot;
vtkexportmesh(File, fens, fes)
@async run(`&quot;paraview.exe&quot; $File`)</code></pre><p>The simulation will be executed with the help of algorithms defined in the package <code>FinEtoolsDeforLinear</code>. The algorithms accept a dictionary of model data. The model data dictionary will be built up as follows.</p><p>First we make the interior region. The model reduction is for a three-dimensional finite element model.</p><pre><code class="language-julia">MR = DeforModelRed3D
material = MatDeforElastIso(MR, rho, E, nu, 0.0)</code></pre><p>We shall create two separate finite element model machines. They are distinguished by the quadrature rule. The mass rule, in order to evaluate the mass matrix accurately, needs to be of higher order than the one we prefer to use for the stiffness.</p><pre><code class="language-julia">region1 = FDataDict(&quot;femm&quot;=&gt;FEMMDeforLinear(MR, IntegDomain(fes, GaussRule(3,2)), material), &quot;femm_mass&quot;=&gt;FEMMDeforLinear(MR, IntegDomain(fes, GaussRule(3,3)), material))</code></pre><p>Select nodes that will be clamped.</p><pre><code class="language-julia">nl1 = selectnode(fens; plane=[1.0 0.0 0.0 0.0], thickness=H/1.0e4)
ebc1 = FDataDict(&quot;node_list&quot;=&gt;nl1, &quot;component&quot;=&gt;1, &quot;displacement&quot;=&gt;0.0)
ebc2 = FDataDict(&quot;node_list&quot;=&gt;nl1, &quot;component&quot;=&gt;2, &quot;displacement&quot;=&gt;0.0)
ebc3 = FDataDict(&quot;node_list&quot;=&gt;nl1, &quot;component&quot;=&gt;3, &quot;displacement&quot;=&gt;0.0)</code></pre><p>Export  a VTK file to visualize the selected points. Choose the representation &quot;Points&quot;, and select color and size approximately 4. These notes should correspond to the clamped base of the membrane.</p><pre><code class="language-julia">File =  &quot;FV32-nl1.vtk&quot;
vtkexportmesh(File, fens, FESetP1(reshape(nl1, length(nl1), 1)))</code></pre><p>Select all nodes on the plane Z = 0. This will be prevented from moving in the Z direction.</p><pre><code class="language-julia">nl4 = selectnode(fens; plane=[0.0 0.0 1.0 0.0], thickness=H/1.0e4)
ebc4 = FDataDict(&quot;node_list&quot;=&gt;nl4, &quot;component&quot;=&gt;3, &quot;displacement&quot;=&gt;0.0)</code></pre><p>Export  a VTK file to visualize the selected points. Choose the representation &quot;Points&quot;, and select color and size approximately 4. These points all should be on the bottom face of the three-dimensional domain.</p><pre><code class="language-julia">File =  &quot;FV32-nl4.vtk&quot;
vtkexportmesh(File, fens, FESetP1(reshape(nl4, length(nl4), 1)))</code></pre><p>Make model data: the nodes, the regions, the boundary conditions, and the number of eigenvalues are set. Note that the number of eigenvalues needs to be set to 6+N,  where 6 is the number of rigid body modes, and N is the number of deformation frequencies we are interested in.</p><pre><code class="language-julia">neigvs = 10                  # how many eigenvalues
modeldata =  FDataDict(&quot;fens&quot;=&gt; fens, &quot;regions&quot;=&gt;  [region1], &quot;essential_bcs&quot;=&gt;[ebc1 ebc2 ebc3 ebc4], &quot;neigvs&quot;=&gt;neigvs)</code></pre><p>Solve using an algorithm: the modal solver. The solver will supplement the model data with the geometry and displacement fields, and the solution (eigenvalues, eigenvectors), and the data upon return can be extracted from the dictionary.</p><pre><code class="language-julia">modeldata = AlgoDeforLinearModule.modal(modeldata)</code></pre><p>Here we extract the angular velocities corresponding to the natural frequencies.</p><pre><code class="language-julia">fs = modeldata[&quot;omega&quot;]/(2*pi)
println(&quot;Eigenvalues: $fs [Hz]&quot;)
println(&quot;Percentage frequency errors: $((vec(fs[1:6]) - vec(Reffs))./vec(Reffs)*100)&quot;)</code></pre><p>The problem was solved for instance with Abaqus, using plane stress eight node elements. The results were:</p><table><tr><th style="text-align: right">Element</th><th style="text-align: right">Frequencies (relative errors)</th></tr><tr><td style="text-align: right">CPS8R</td><td style="text-align: right">44.629 (0.02)   130.11 (0.06)   162.70 (0.00)   246.42 (0.15)   381.32 (0.37)   391.51 (0.02)</td></tr></table><p>Compared these numbers with those computed by our three-dimensional model.</p><p>The mode shapes may be visualized with <code>paraview</code>. Here is for instance mode 8: <img src="FV32-mode-8.png" alt/></p><p>The algorithm to export the mode shapes expects some input. We shall specify the filename and the numbers of modes to export.</p><pre><code class="language-julia">modeldata[&quot;postprocessing&quot;] = FDataDict(&quot;file&quot;=&gt;&quot;FV32-modes&quot;, &quot;mode&quot;=&gt;1:neigvs)
modeldata = AlgoDeforLinearModule.exportmode(modeldata)</code></pre><p>The algorithm attaches a little bit to the name of the exported file. If <code>paraview.exe</code> is installed, the command below should bring up the postprocessing file.</p><pre><code class="language-julia">@async run(`&quot;paraview.exe&quot; $(modeldata[&quot;postprocessing&quot;][&quot;file&quot;]*&quot;1.vtk&quot;)`)</code></pre><p>To animate the mode shape in <code>Paraview</code> do the following:</p><ul><li>Apply the filter &quot;Warp by vector&quot;.</li><li>Turn on the &quot;Animation view&quot;.</li><li>Add the mode shape data set (&quot;WarpByVector1&quot;) by clicking the &quot;+&quot;.</li><li>Double-click the line with the data set. The &quot;Animation Keyframes&quot; dialog will come up. Double-click &quot;Ramp&quot; interpolation, and change it to &quot;Sinusoid&quot;. Set the frequency to 1.0. Change the &quot;Value&quot; from 0 to 100.</li><li>In the animation view, set the mode to &quot;Real-time&quot;, and the duration to 4.0 seconds.</li><li>Click on the &quot;Play&quot; button. If you wish, click on the &quot;Loop&quot; button.</li></ul><pre><code class="language-julia">true</code></pre><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Wednesday 19 August 2020 00:43">Wednesday 19 August 2020</span>. Using Julia version 1.3.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
