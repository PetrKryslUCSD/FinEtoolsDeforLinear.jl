<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Export  to Abaqus · FinEtoolsDeforLinear.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">FinEtoolsDeforLinear.jl</span></div><form class="docs-search" action="../search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../index.html">Home</a></li><li><a class="tocitem" href="tutorials.html">Tutorials</a></li><li><a class="tocitem" href="../guide/guide.html">How to guide</a></li><li><span class="tocitem">Types and Functions</span><ul><li><a class="tocitem" href="../man/types.html">Types</a></li><li><a class="tocitem" href="../man/functions.html">Functions</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="twisted_beam-export-to-abaqus_tut.html">Export  to Abaqus</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="twisted_beam-export-to-abaqus_tut.html">Export  to Abaqus</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/PetrKryslUCSD/FinEtoolsDeforLinear.jl/blob/master/docs/src/tutorials/twisted_beam-export-to-abaqus_tut.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Export-to-Abaqus"><a class="docs-heading-anchor" href="#Export-to-Abaqus">Export  to Abaqus</a><a id="Export-to-Abaqus-1"></a><a class="docs-heading-anchor-permalink" href="#Export-to-Abaqus" title="Permalink"></a></h1><p>In this example  we show how to export a model  to the finite element software Abaqus.</p><p>The model is solved also in the example <code>twisted_beam_algo.jl</code>.  Here we export the model for execution in Abaqus.</p><p>The task begins with defining the input parameters, creating the mesh, identifying the nodes  to which essential boundary conditions are to be applied,  and extracting from the boundary the surface finite elements to which the traction loading at the end of the beam is to be applied.</p><p>This is the finite element toolkit itself.</p><pre><code class="language-julia">using FinEtools</code></pre><p>The linear stress analysis application is implemented in this package.</p><pre><code class="language-julia">using FinEtoolsDeforLinear</code></pre><p>We will also use specifically some functions from these modules.</p><pre><code class="language-julia">using FinEtoolsDeforLinear.AlgoDeforLinearModule
using FinEtools.MeshExportModule</code></pre><p>Define some parameters, in consistent units.</p><pre><code class="language-julia">E = 0.29e8;
nu = 0.22;
W = 1.1;
L = 12.;
t =  0.32;
nl = 2; nt = 1; nw = 1; ref = 2;
p =   1/W/t;</code></pre><p>Loading in the Z direction. Reference (publication by Harder): 5.424e-3.</p><pre><code class="language-julia">loadv = [0;0;p]; dir = 3; uex = 0.005424534868469;</code></pre><p>Loading in the Y direction. Reference (Harder): 1.754e-3. And comment the line below to obtain a solution in the other direction.</p><pre><code class="language-julia">#loadv = [0;p;0]; dir = 2; uex = 0.001753248285256;
tolerance  = t/1000;

fens,fes  = H8block(L,W,t, nl*ref,nw*ref,nt*ref)</code></pre><p>Reshape the rectangular block into a twisted beam shape.</p><pre><code class="language-julia">for i = 1:count(fens)
    let
        a = fens.xyz[i,1]/L*(pi/2); y = fens.xyz[i,2]-(W/2); z = fens.xyz[i,3]-(t/2);
        fens.xyz[i,:] = [fens.xyz[i,1],y*cos(a)-z*sin(a),y*sin(a)+z*cos(a)];
    end
end</code></pre><p>Clamped face of the beam: select all the nodes in this cross-section.</p><pre><code class="language-julia">l1  = selectnode(fens; box = [0 0 -100*W 100*W -100*W 100*W], inflate  =  tolerance)</code></pre><p>Traction on the opposite face</p><pre><code class="language-julia">boundaryfes  =   meshboundary(fes);
Toplist   = selectelem(fens,boundaryfes, box =  [L L -100*W 100*W -100*W 100*W], inflate =   tolerance);</code></pre><p>The tutorial proper begins here. We create the Abaqus exporter and start writing the .inp file.</p><pre><code class="language-julia">AE = AbaqusExporter(&quot;twisted_beam&quot;);
HEADING(AE, &quot;Twisted beam example&quot;);</code></pre><p>The  part definition is trivial: all will be defined rather for the instance of the part.</p><pre><code class="language-julia">PART(AE, &quot;part1&quot;);
END_PART(AE);</code></pre><p>The assembly will consist  of a single instance (of the empty part defined above).  The node set will be defined for the instance itself.</p><pre><code class="language-julia">ASSEMBLY(AE, &quot;ASSEM1&quot;);
INSTANCE(AE, &quot;INSTNC1&quot;, &quot;PART1&quot;);
NODE(AE, fens.xyz);</code></pre><p>We export the finite elements themselves.  Note that the elements  need to have  distinct numbers.  We start numbering the hexahedra at 1. The definition of the element creates simultaneously an element set  which is used below in the section assignment (and the definition of the load).</p><pre><code class="language-julia">ELEMENT(AE, &quot;c3d8rh&quot;, &quot;AllElements&quot;, 1, connasarray(fes))</code></pre><p>The traction is applied to surface elements.  Because the elements in the Abaqus model need to have unique numbers, we need to start from an integer  which is  the number of the solid elements plus one.</p><pre><code class="language-julia">ELEMENT(AE, &quot;SFM3D4&quot;, &quot;TractionElements&quot;, 1+count(fes), connasarray(subset(boundaryfes,Toplist)))</code></pre><p>The nodes in the clamped cross-section are going to be grouped in the node set <code>l1</code>.</p><pre><code class="language-julia">NSET_NSET(AE, &quot;l1&quot;, l1)</code></pre><p>We define a coordinate system  (orientation of the material  coordinate system), in this example it is the global Cartesian coordinate system. The sections are defined for the solid elements of the interior and the surface elements to which the traction is applied, and the assignment to the  elements is by element set (<code>AllElements</code> and <code>TractionElements</code>). Note that for the solid section we also define reference  to hourglass control named <code>Hourglassctl</code>.</p><pre><code class="language-julia">ORIENTATION(AE, &quot;GlobalOrientation&quot;, vec([1. 0 0]), vec([0 1. 0]));
SOLID_SECTION(AE, &quot;elasticity&quot;, &quot;GlobalOrientation&quot;, &quot;AllElements&quot;, &quot;Hourglassctl&quot;);
SURFACE_SECTION(AE, &quot;TractionElements&quot;)</code></pre><p>This concludes the definition  of the instance  and of the assembly.</p><pre><code class="language-julia">END_INSTANCE(AE);
END_ASSEMBLY(AE);</code></pre><p>This is the definition of the isotropic elastic material.</p><pre><code class="language-julia">MATERIAL(AE, &quot;elasticity&quot;)
ELASTIC(AE, E, nu)</code></pre><p>The element properties for the interior hexahedra are controlled by the section-control.  In this case we are selecting enhanced hourglass stabilization (much preferable to the default  stiffness stabilization).</p><pre><code class="language-julia">SECTION_CONTROLS(AE, &quot;Hourglassctl&quot;, &quot;HOURGLASS=ENHANCED&quot;)</code></pre><p>The static perturbation  analysis step is defined  next.</p><pre><code class="language-julia">STEP_PERTURBATION_STATIC(AE)</code></pre><p>The boundary conditions are applied directly to the node set <code>l1</code>.   Since the node set is defined for the instance, we need to refer to it by the qualified name <code>ASSEM1.INSTNC1.l1</code>.</p><pre><code class="language-julia">BOUNDARY(AE, &quot;ASSEM1.INSTNC1.l1&quot;, 1)
BOUNDARY(AE, &quot;ASSEM1.INSTNC1.l1&quot;, 2)
BOUNDARY(AE, &quot;ASSEM1.INSTNC1.l1&quot;, 3)</code></pre><p>The traction is applied to the surface  quadrilateral elements exported above.</p><pre><code class="language-julia">DLOAD(AE, &quot;ASSEM1.INSTNC1.TractionElements&quot;, vec(loadv))</code></pre><p>Now we have defined  the analysis step and the definition of the model can be concluded.</p><pre><code class="language-julia">END_STEP(AE)
close(AE)</code></pre><p>As quick check, here is the contents of the  exported model file:</p><pre><code class="language-julia">@show readlines(&quot;twisted_beam.inp&quot;)</code></pre><p>What remains is to load the model into Abaqus and execute it as a job.  Alternatively Abaqus can be called on the input file to carry out the analysis at the command line as</p><pre><code class="language-none">abaqus job=twisted_beam.inp</code></pre><p>The output database <code>twisted_beam.odb</code> can then be loaded for postprocessing, for instance from the command line as</p><pre><code class="language-none">abaqus viewer database=twisted_beam.odb</code></pre><pre><code class="language-julia">nothing</code></pre><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Thursday 20 August 2020 15:58">Thursday 20 August 2020</span>. Using Julia version 1.5.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
