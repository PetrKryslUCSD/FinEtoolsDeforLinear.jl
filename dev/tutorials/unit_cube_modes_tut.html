<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Vibration of a cube of nearly incompressible material · FinEtoolsDeforLinear.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">FinEtoolsDeforLinear.jl</span></div><form class="docs-search" action="../search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../index.html">Home</a></li><li><a class="tocitem" href="tutorials.html">Tutorials</a></li><li><a class="tocitem" href="../guide/guide.html">How to guide</a></li><li><span class="tocitem">Types and Functions</span><ul><li><a class="tocitem" href="../man/types.html">Types</a></li><li><a class="tocitem" href="../man/functions.html">Functions</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="unit_cube_modes_tut.html">Vibration of a cube of nearly incompressible material</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="unit_cube_modes_tut.html">Vibration of a cube of nearly incompressible material</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/PetrKryslUCSD/FinEtoolsDeforLinear.jl/blob/master/docs/src/tutorials/unit_cube_modes_tut.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Vibration-of-a-cube-of-nearly-incompressible-material"><a class="docs-heading-anchor" href="#Vibration-of-a-cube-of-nearly-incompressible-material">Vibration of a cube of nearly incompressible material</a><a id="Vibration-of-a-cube-of-nearly-incompressible-material-1"></a><a class="docs-heading-anchor-permalink" href="#Vibration-of-a-cube-of-nearly-incompressible-material" title="Permalink"></a></h1><h2 id="Description"><a class="docs-heading-anchor" href="#Description">Description</a><a id="Description-1"></a><a class="docs-heading-anchor-permalink" href="#Description" title="Permalink"></a></h2><p>Compute the free-vibration spectrum of a unit cube of nearly incompressible isotropic material, E = 1, ν = 0.499, and ρ = 1 (refer to [1]).</p><p>The solution with the <code>FinEtools</code> package is compared with a commercial software  solution, and hence we also export the model to Abaqus.</p><h2 id="References"><a class="docs-heading-anchor" href="#References">References</a><a id="References-1"></a><a class="docs-heading-anchor-permalink" href="#References" title="Permalink"></a></h2><p>[1] Puso MA, Solberg J (2006) A stabilized nodally integrated tetrahedral. International Journal for Numerical Methods in Engineering 67: 841-867. [2] P. Krysl, Mean-strain 8-node hexahedron with optimized energy-sampling stabilization, Finite Elements in Analysis and Design 108 (2016) 41–53.</p><p><img src="unit_cube-mode7.png" alt/></p><h2 id="Goals"><a class="docs-heading-anchor" href="#Goals">Goals</a><a id="Goals-1"></a><a class="docs-heading-anchor-permalink" href="#Goals" title="Permalink"></a></h2><ul><li>Show how to generate hexahedral mesh, mirroring and merging together parts.</li><li>Export the model to Abaqus.</li></ul><pre><code class="language-julia">#</code></pre><h2 id="Definitions"><a class="docs-heading-anchor" href="#Definitions">Definitions</a><a id="Definitions-1"></a><a class="docs-heading-anchor-permalink" href="#Definitions" title="Permalink"></a></h2><p>This is the finite element toolkit itself.</p><pre><code class="language-julia">using FinEtools</code></pre><p>The linear stress analysis application is implemented in this package.</p><pre><code class="language-julia">using FinEtoolsDeforLinear</code></pre><p>Convenience import.</p><pre><code class="language-julia">using FinEtools.MeshExportModule</code></pre><p>The eigenvalue problem is solved with the Lanczos algorithm from this package.</p><pre><code class="language-julia">using Arpack</code></pre><p>The material properties and dimensions are defined with physical units.</p><pre><code class="language-julia">E = 1*phun(&quot;PA&quot;);
nu = 0.499;
rho = 1*phun(&quot;KG/M^3&quot;);
a = 1*phun(&quot;M&quot;); # length of the side of the cube</code></pre><p>We generate a mesh of  5 x 5 x 5 serendipity 20-node hexahedral elements in a regular grid.</p><pre><code class="language-julia">fens, fes  = H20block(a, a, a, 5, 5, 5);</code></pre><p>The problem is solved in three dimensions and hence we create the displacement field as three-dimensional with three displacement components per node. The degrees of freedom are then numbered  (note that no essential boundary conditions are applied, since the cube is free-floating).</p><pre><code class="language-julia">geom = NodalField(fens.xyz)
u = NodalField(zeros(size(fens.xyz,1),3)) # displacement field
numberdofs!(u);</code></pre><p>The model is fully three-dimensional, and hence the material model  and the FEMM created below need to refer to an appropriate model-reduction scheme.</p><pre><code class="language-julia">MR = DeforModelRed3D
material = MatDeforElastIso(MR, rho, E, nu, 0.0);</code></pre><p>Note that we compute the stiffness  and the mass matrix using different FEMMs. The difference  is only the quadrature rule chosen: in order to make the mass matrix  non-singular, an accurate  Gauss rule  needs to be used, whereas for the stiffness matrix we want to avoid the excessive stiffness  and therefore the reduced Gauss rule is used.</p><pre><code class="language-julia">femm = FEMMDeforLinear(MR, IntegDomain(fes, GaussRule(3,2)), material);
K = stiffness(femm, geom, u)
femm = FEMMDeforLinear(MR, IntegDomain(fes, GaussRule(3,3)), material)
M = mass(femm, geom, u);</code></pre><p>The free vibration problem  can now be solved.   In order for the eigenvalue solver  to work well, we apply mass-shifting (otherwise the first matrix given to the solver – stiffness – would be singular). We specify the number of eigenvalues to solve for, and we  guess the frequency  with which to shift as 0.01 Hz.</p><pre><code class="language-julia">neigvs = 20 # how many eigenvalues
OmegaShift = (0.01*2*pi)^2; # The frequency with which to shift</code></pre><p>The <code>eigs</code> routine can now be invoked to solve for a given number of frequencies from the smallest-magnitude end of the spectrum. Note that the mass shifting  needs to be undone when the solution is obtained.</p><pre><code class="language-julia">evals, evecs, nconv = eigs(K+OmegaShift*M, M; nev=neigvs, which=:SM)
@show nconv == neigvs
evals = evals .- OmegaShift;
fs = real(sqrt.(complex(evals)))/(2*pi)
println(&quot;Eigenvalues: $fs [Hz]&quot;)</code></pre><p>The first nonzero frequency, frequency 7, should be around .263 Hz.</p><p>The computed mode can be visualized in Paraview. Use the  &quot;Animation view&quot; to produce moving pictures for the mode.</p><pre><code class="language-julia">mode = 7
scattersysvec!(u, v[:,mode])
File =  &quot;unit_cube_modes.vtk&quot;
vtkexportmesh(File, fens, fes; vectors=[(&quot;mode$mode&quot;, u.values)])
@async run(`&quot;paraview.exe&quot; $File`);</code></pre><p>Finally  we export the model to Abaqus.  Note that we specify the mass density property (necessary for dynamics).</p><pre><code class="language-julia">AE = AbaqusExporter(&quot;unit_cube_modes_h20&quot;);
HEADING(AE, &quot;Vibration modes of unit cube  of almost incompressible material.&quot;);
COMMENT(AE, &quot;The  first six frequencies are rigid body modes.&quot;);
COMMENT(AE, &quot;The  first nonzero frequency (7) should be around 0.26 Hz&quot;);
PART(AE, &quot;part1&quot;);
END_PART(AE);
ASSEMBLY(AE, &quot;ASSEM1&quot;);
INSTANCE(AE, &quot;INSTNC1&quot;, &quot;PART1&quot;);
NODE(AE, fens.xyz);
COMMENT(AE, &quot;The hybrid form of the serendipity hexahedron is chosen because&quot;);
COMMENT(AE, &quot;the material is  nearly incompressible.&quot;);
ELEMENT(AE, &quot;C3D20RH&quot;, &quot;AllElements&quot;, 1, connasarray(fes))
ORIENTATION(AE, &quot;GlobalOrientation&quot;, vec([1. 0 0]), vec([0 1. 0]));
SOLID_SECTION(AE, &quot;elasticity&quot;, &quot;GlobalOrientation&quot;, &quot;AllElements&quot;);
END_INSTANCE(AE);
END_ASSEMBLY(AE);
MATERIAL(AE, &quot;elasticity&quot;)
ELASTIC(AE, E, nu)
DENSITY(AE, rho)
STEP_FREQUENCY(AE, neigvs)
END_STEP(AE)
close(AE)</code></pre><p>It remains is to load the model into Abaqus and execute it as a job. Alternatively Abaqus can be called on the input file to carry out the analysis at the command line as</p><pre><code class="language-none">abaqus job=unit_cube_modes_h20.inp</code></pre><p>The output database <code>unit_cube_modes_h20.odb</code> can then be loaded for postprocessing, for instance from the command line as</p><pre><code class="language-none">abaqus viewer database=unit_cube_modes_h20.odb</code></pre><p>Don&#39;t forget to compare the computed frequencies and the mode shapes.  For instance, the first six frequencies should be nearly 0, and the seventh frequency should be approximately  0.262 Hz. There may be  very minor differences due to the fact that  the FinEtools formulation is purely displacement-based, whereas the Abaqus model is hybrid (displacement plus pressure).</p><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Wednesday 19 August 2020 00:43">Wednesday 19 August 2020</span>. Using Julia version 1.3.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
